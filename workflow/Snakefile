import pandas as pd

# Load configuration
configfile: "config/config.yaml"

samples = pd.read_table(config["samples"], index_col="sample")

include: "rules/qc.smk"
include: "rules/trimmomatic.smk"
include: "rules/denovo_assembly.smk"
include: "rules/normalize_reads_depth.smk"
include: "rules/read_classification.smk"
rule all:
    # This rule specifies the final output files that should be generated by the workflow.
    input:
        "results/qc/multiqc_all/multiqc_report.html",
        "results/qc/multiqc_raw/multiqc_report.html",
        "results/qc/multiqc_trimmed/multiqc_report.html",
        expand("results/assembly/{sample}/contigs.fasta", sample=samples.index)

        
