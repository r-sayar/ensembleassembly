import pandas as pd

# Load configuration
configfile: "config/config.yaml"

samples = pd.read_table(config["samples"], index_col="sample")

include: "rules/01_01_qc.smk"
include: "rules/01_02_trimmomatic.smk"
include: "rules/04_denovo_assembly.smk"
include: "rules/03_normalize_reads_depth.smk"
include: "rules/02_01_read_classification.smk"
include: "rules/02_02_decontamination.smk"
include: "rules/06_reference_selection.smk"
include: "rules/07_ragtag.smk"
rule all:
    # This rule specifies the final output files that should be generated by the workflow.
    input:
        "results/qc/multiqc_all/multiqc_report.html",
        "results/qc/multiqc_raw/multiqc_report.html",
        "results/qc/multiqc_trimmed/multiqc_report.html",
        expand("results/assembly/denovo/{sample}/contigs.fasta", sample=samples.index)

        
